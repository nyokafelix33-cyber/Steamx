<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Feng World V51.0 - Platinum Archive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --feng-primary: #d3f243;
            --feng-bg: #0b0e14;
            --feng-card: #1c1f26;
            --feng-text: #eeeeee;
            --feng-header: #000000;
            --feng-border: rgba(255, 255, 255, 0.08);
            --feng-accent: #25d366;
        }

        [data-theme="light"] {
            --feng-bg: #f4f4f4;
            --feng-card: #ffffff;
            --feng-text: #1a1a1a;
            --feng-header: #ffffff;
            --feng-border: rgba(0, 0, 0, 0.1);
        }

        body { 
            background-color: var(--feng-bg); 
            color: var(--feng-text); 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            padding: 0; 
            overflow-x: hidden;
        }

        header {
            background-color: var(--feng-header);
            padding: 25px 6% 20px 6%;
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 4px solid var(--feng-primary);
        }

        .logo-branding { font-size: 32px; font-weight: 900; color: var(--feng-text); text-transform: uppercase; }
        .logo-branding span { color: var(--feng-primary); }

        .search-wrapper {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid var(--feng-border);
            border-radius: 14px;
            display: flex;
            align-items: center;
            padding: 12px 18px;
            margin-top: 15px;
        }

        .search-wrapper input {
            background: transparent; border: none; color: #fff; width: 100%; outline: none; margin-left: 10px;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 12px;
            padding: 0 6% 20px 6%;
        }

        .item-card {
            background: var(--feng-card);
            border-radius: 14px;
            border: 1px solid var(--feng-border);
            overflow: hidden;
        }

        .item-card img { width: 100%; height: 185px; object-fit: cover; }

        .item-meta { padding: 10px; font-size: 12px; }
        .item-meta b { display: block; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .item-meta span { color: var(--feng-primary); font-weight: 800; font-size: 10px; }

        /* OVERLAYS */
        .overlay-pane {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: var(--feng-bg);
            z-index: 9999;
            display: none;
            flex-direction: column;
        }

        .overlay-nav {
            padding: 20px 6%;
            background: var(--feng-header);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--feng-primary);
        }

        .grid-menu {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            padding: 20px 6%;
            overflow-y: auto;
        }

        .option-btn {
            background: var(--feng-card);
            border: 1px solid var(--feng-primary);
            color: var(--feng-text);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            font-weight: 800;
        }

        /* FOOTER */
        footer {
            position: fixed;
            bottom: 0; width: 100%;
            background: var(--feng-header);
            display: flex;
            padding: 15px 0 30px 0;
            border-top: 1px solid var(--feng-border);
        }

        .nav-link { flex: 1; text-align: center; color: #666; font-size: 10px; text-transform: uppercase; }
        .nav-link.active-tab { color: var(--feng-primary); }
        .nav-link i { font-size: 20px; display: block; margin-bottom: 5px; }
    </style>
</head>
<body onload="FENG_SYS.boot()">

    <header id="ui-header">
        <div class="logo-branding">FE<span>NG</span></div>
        <div class="search-wrapper">
            <i class="fas fa-search" style="color:var(--feng-primary)"></i>
            <input type="text" id="master-search" placeholder="Search Series or Archive..." onkeyup="FENG_SYS.runSearch()">
        </div>
    </header>

    <main id="view-home" style="padding-bottom: 100px;">
        <div style="padding: 20px 6% 10px 6%;"><h2>ðŸ“º UNIFIED SERIES</h2></div>
        <div class="content-grid" id="grid-series"></div>
        <div style="padding: 20px 6% 10px 6%;"><h2>ðŸŽ¬ ARCHIVE</h2></div>
        <div class="content-grid" id="grid-archive"></div>
    </main>

    <div class="overlay-pane" id="view-episodes">
        <div class="overlay-nav">
            <h2 id="ep-title" style="margin:0; color:var(--feng-primary); font-size: 18px;">SELECT EPISODE</h2>
            <i class="fas fa-times fa-2x" onclick="FENG_SYS.closeOverlays()"></i>
        </div>
        <div class="grid-menu" id="episode-container"></div>
    </div>

    <div class="overlay-pane" id="view-settings">
        <div class="overlay-nav">
            <h2 style="margin:0">SETTINGS</h2>
            <i class="fas fa-times fa-2x" onclick="FENG_SYS.navigate('home')"></i>
        </div>
        <div style="padding: 30px 6%;">
            <div class="option-btn" onclick="FENG_SYS.switchTheme()">TOGGLE THEME (DARK/LIGHT)</div>
            <p style="text-align:center; opacity:0.5; margin-top:20px;">Feng World v51.0 Platinum Edition</p>
        </div>
    </div>

    <div class="overlay-pane" id="view-about">
        <div class="overlay-nav"><h2>ABOUT</h2><i class="fas fa-times fa-2x" onclick="FENG_SYS.navigate('home')"></i></div>
        <div style="padding: 30px 6%;">
            <div style="background:var(--feng-card); padding:20px; border-radius:15px; border-left:5px solid var(--feng-primary);">
                <h3>V51.0 PLATINUM</h3>
                <p>Unlocked Archive Batches 1-13. Unified TV seasons with manual episode selection enabled.</p>
            </div>
        </div>
    </div>

    <div class="overlay-pane" id="view-player">
        <div class="overlay-nav">
            <span id="player-title" style="font-weight:900;">PLAYING</span>
            <button onclick="FENG_SYS.killPlayer()" style="background:red; color:white; border:none; padding:8px 15px; border-radius:5px;">EXIT</button>
        </div>
        <iframe id="player-iframe" allowfullscreen style="width:100%; flex-grow:1; border:none; background:black;"></iframe>
    </div>

    <footer>
        <div class="nav-link active-tab" id="btn-home" onclick="FENG_SYS.navigate('home')"><i class="fas fa-home"></i>HOME</div>
        <div class="nav-link" id="btn-settings" onclick="FENG_SYS.navigate('settings')"><i class="fas fa-cog"></i>SETTINGS</div>
        <div class="nav-link" id="btn-about" onclick="FENG_SYS.navigate('about')"><i class="fas fa-info-circle"></i>ABOUT</div>
    </footer>

    <script>
        const FENG_SYS = {
            vault: [
                { id: "66732", title: "Stranger Things", type: "tv", year: "2016-2026", s: 4, img: "https://image.tmdb.org/t/p/w500/x2LSRm2RzL6tYwcI3YmC9n767PA.jpg" },
                { id: "1396", title: "Breaking Bad", type: "tv", year: "2008-2013", s: 5, img: "https://image.tmdb.org/t/p/w500/ggFHUXNuqzmgp7vny71oYFjUIp9.jpg" },
                { id: "299534", title: "Avengers: Endgame", type: "movie", year: "2019", img: "https://image.tmdb.org/t/p/w500/or06vSqzWBFscv1qCG76uC1fsR6.jpg" }
            ],

            boot: function() { this.render(this.vault); },

            render: function(data) {
                const sGrid = document.getElementById('grid-series');
                const aGrid = document.getElementById('grid-archive');
                sGrid.innerHTML = ''; aGrid.innerHTML = '';
                data.forEach(item => {
                    const html = `
                        <div class="item-card" onclick="FENG_SYS.handleItem('${item.type}','${item.id}','${item.title}',${item.s || 0})">
                            <img src="${item.img}">
                            <div class="item-meta"><b>${item.title}</b><span>${item.year}</span></div>
                        </div>`;
                    item.type === 'tv' ? sGrid.innerHTML += html : aGrid.innerHTML += html;
                });
            },

            handleItem: function(type, id, title, sCount) {
                if(type === 'tv') this.openEpisodes(id, title, sCount);
                else this.startPlayer('movie', id, title);
            },

            openEpisodes: function(id, title, sCount) {
                const container = document.getElementById('episode-container');
                document.getElementById('ep-title').innerText = title;
                container.innerHTML = '';
                // For simplicity in V51, we show seasons first. 
                // When clicked, it prompts for the episode to keep code light.
                for(let i=1; i<=sCount; i++) {
                    container.innerHTML += `<div class="option-btn" onclick="FENG_SYS.playTv('${id}',${i},'${title}')">SEASON ${i}</div>`;
                }
                document.getElementById('view-episodes').style.display = 'flex';
            },

            playTv: function(id, s, title) {
                const ep = prompt("Enter Episode Number:", "1");
                if(ep) this.startPlayer('tv', `${id}/${s}/${ep}`, `${title} S${s} E${ep}`);
            },

            startPlayer: function(type, id, title) {
                this.closeOverlays();
                document.getElementById('player-title').innerText = title;
                document.getElementById('view-player').style.display = 'flex';
                document.getElementById('player-iframe').src = `https://vidsrc.to/embed/${type}/${id}`;
            },

            killPlayer: function() {
                document.getElementById('view-player').style.display = 'none';
                document.getElementById('player-iframe').src = '';
            },

            closeOverlays: function() {
                document.querySelectorAll('.overlay-pane').forEach(el => el.style.display = 'none');
            },

            navigate: function(screen) {
                this.closeOverlays();
                document.getElementById('view-home').style.display = screen === 'home' ? 'block' : 'none';
                document.getElementById('ui-header').style.display = screen === 'home' ? 'block' : 'none';
                if(screen !== 'home') document.getElementById('view-' + screen).style.display = 'flex';
                
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active-tab'));
                document.getElementById('btn-' + screen).classList.add('active-tab');
            },

            switchTheme: function() {
                const root = document.documentElement;
                root.setAttribute('data-theme', root.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
            },

            runSearch: function() {
                const q = document.getElementById('master-search').value.toLowerCase();
                this.render(this.vault.filter(i => i.title.toLowerCase().includes(q)));
            }
        };
    </script>
</body>
</html>
