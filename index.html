<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
            <title>StreamX Studio Pro</title>
                
                    <link rel="manifest" href="manifest.json">
                        <meta name="theme-color" content="#e50914">
                            <meta name="apple-mobile-web-app-capable" content="yes">

                                <style>
                                        :root { --accent: #e50914; transition: all 0.3s ease; }
                                                [data-theme="dark"] { --bg: #0c0c0c; --surf: #1a1a1a; --text: #fff; --brd: #333; }
                                                        [data-theme="light"] { --bg: #f5f5f5; --surf: #fff; --text: #1a1a1a; --brd: #ddd; }

                                                                body { background: var(--bg); color: var(--text); font-family: system-ui; margin: 0; overflow-x: hidden; }
                                                                        
                                                                                /* Layout */
                                                                                        header { 
                                                                                                    background: var(--surf); padding: 15px; display: flex; 
                                                                                                                justify-content: space-between; align-items: center; border-bottom: 1px solid var(--brd);
                                                                                                                            position: sticky; top: 0; z-index: 100;
                                                                                                                                    }

                                                                                                                                            #offlineBanner { background: #ffcc00; color: #000; text-align: center; padding: 5px; font-size: 10px; display: none; font-weight: bold; }

                                                                                                                                                    /* Video System */
                                                                                                                                                            .player-container { width: 100%; aspect-ratio: 16/9; background: #000; position: relative; }
                                                                                                                                                                    video { width: 100%; height: 100%; }
                                                                                                                                                                            video::cue { background: rgba(0,0,0,0.8); color: #fff; font-size: 18px; }

                                                                                                                                                                                    /* Performance Overlay */
                                                                                                                                                                                            #statsBox {
                                                                                                                                                                                                        position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.7);
                                                                                                                                                                                                                    color: #0f0; font-family: monospace; font-size: 10px; padding: 8px;
                                                                                                                                                                                                                                border-radius: 4px; display: none; pointer-events: none; border: 1px solid #0f0;
                                                                                                                                                                                                                                        }

                                                                                                                                                                                                                                                /* Control Grid */
                                                                                                                                                                                                                                                        .grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; padding: 12px; }
                                                                                                                                                                                                                                                                button { 
                                                                                                                                                                                                                                                                            background: var(--surf); color: var(--text); border: 1px solid var(--brd);
                                                                                                                                                                                                                                                                                        padding: 12px 4px; border-radius: 8px; font-size: 10px; font-weight: bold;
                                                                                                                                                                                                                                                                                                }
                                                                                                                                                                                                                                                                                                        button:active { background: var(--accent); color: #fff; transform: scale(0.96); }

                                                                                                                                                                                                                                                                                                                /* Admin/Settings Drawer */
                                                                                                                                                                                                                                                                                                                        #adminPanel { display: none; padding: 15px; background: var(--surf); border-top: 2px solid var(--accent); }
                                                                                                                                                                                                                                                                                                                                input { width: 92%; padding: 10px; margin: 5px 0; border-radius: 6px; border: 1px solid var(--brd); background: var(--bg); color: var(--text); }

                                                                                                                                                                                                                                                                                                                                        #toast {
                                                                                                                                                                                                                                                                                                                                                    position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%);
                                                                                                                                                                                                                                                                                                                                                                background: var(--accent); color: #fff; padding: 8px 20px; border-radius: 20px;
                                                                                                                                                                                                                                                                                                                                                                            display: none; font-size: 12px; font-weight: bold; z-index: 1000;
                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                        </style>
                                                                                                                                                                                                                                                                                                                                                                                        </head>
                                                                                                                                                                                                                                                                                                                                                                                        <body>

                                                                                                                                                                                                                                                                                                                                                                                            <div id="offlineBanner">‚ö†Ô∏è OFFLINE MODE</div>

                                                                                                                                                                                                                                                                                                                                                                                                <header>
                                                                                                                                                                                                                                                                                                                                                                                                        <span style="color:var(--accent); font-weight:bold;">STREAMX</span>
                                                                                                                                                                                                                                                                                                                                                                                                                <div style="display:flex; gap:8px;">
                                                                                                                                                                                                                                                                                                                                                                                                                            <button onclick="toggleTheme()" style="padding:4px 8px;">üåì</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                        <button onclick="unlockAdmin()" style="padding:4px 8px;">‚öôÔ∏è</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                    </header>

                                                                                                                                                                                                                                                                                                                                                                                                                                                        <div class="player-container">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                <div id="statsBox">FPS: <span id="fps">0</span> | MEM: <span id="mem">--</span></div>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <video id="mainVideo" controls crossorigin="anonymous">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <source id="videoSrc" src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </video>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div id="adminPanel">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <input type="text" id="mTitle" placeholder="Title">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <input type="text" id="mUrl" placeholder="MP4 URL">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <button onclick="saveMovie()" style="width:100%; background:var(--accent); color:#fff;">ADD MOVIE</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div class="grid">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <button onclick="startVoice()">üé§ VOICE</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <button onclick="setSleep()">üåô SLEEP</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <button onclick="changeSpeed()">‚ö° SPD: <span id="spd">1x</span></button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <button onclick="togglePiP()">üì∫ POP-OUT</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <button onclick="shareLink()">üîó SHARE</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <button onclick="toggleStats()">üìä DEBUG</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <button onclick="toggleDataSaver()" id="dsBtn">üì∂ HD MODE</button>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <div id="toast"></div>

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const v = document.getElementById('mainVideo');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const spdTxt = document.getElementById('spd');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const dsBtn = document.getElementById('dsBtn');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        let speeds = [1, 1.5, 2, 0.5];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                let spdIdx = 0;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        let isDataSaver = false;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                // --- CORE FUNCTIONS ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        function toggleTheme() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const h = document.documentElement;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const t = h.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            h.setAttribute('data-theme', t);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        localStorage.setItem('theme', t);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        function unlockAdmin() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if(prompt("Master Key:") === "1234") document.getElementById('adminPanel').style.display = 'block';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    function changeSpeed() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                spdIdx = (spdIdx + 1) % speeds.length;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            v.playbackRate = speeds[spdIdx];
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        spdTxt.innerText = speeds[spdIdx] + 'x';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        function toggleDataSaver() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    isDataSaver = !isDataSaver;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const time = v.currentTime;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            v.src = isDataSaver ? "https://www.w3schools.com/html/movie.mp4" : "https://www.w3schools.com/html/mov_bbb.mp4";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        dsBtn.innerText = isDataSaver ? "üì∂ SAVER ON" : "üì∂ HD MODE";
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    v.currentTime = time;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                v.play();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            showToast(isDataSaver ? "Data Saver Active" : "High Quality Active");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            function shareLink() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const t = Math.floor(v.currentTime);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const url = window.location.origin + window.location.pathname + "?t=" + t;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                navigator.clipboard.writeText(url);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            showToast("Shared at " + t + "s");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(navigator.vibrate) navigator.vibrate(40);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        function setSleep() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const m = prompt("Minutes until sleep?", "30");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if(m) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                showToast("Timer set for " + m + "m");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                setTimeout(() => { v.pause(); alert("Sleep timer: Paused."); }, m * 60000);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            function startVoice() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const Rec = window.SpeechRecognition || window.webkitSpeechRecognition;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if(!Rec) return alert("Voice not supported");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const recognition = new Rec();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            recognition.onstart = () => showToast("Listening...");
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        recognition.onresult = (e) => showToast("Heard: " + e.results[0][0].transcript);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    recognition.start();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    async function togglePiP() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                try {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                if (v !== document.pictureInPictureElement) await v.requestPictureInPicture();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                else await document.exitPictureInPicture();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            } catch(e) { showToast("PiP Error"); }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            function toggleStats() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const s = document.getElementById('statsBox');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    s.style.display = s.style.display === 'none' ? 'block' : 'none';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    // --- SYSTEM MONITORS ---
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            setInterval(() => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(document.getElementById('statsBox').style.display === 'block') {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const q = v.getVideoPlaybackQuality();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        document.getElementById('fps').innerText = q.totalVideoFrames;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(performance.memory) document.getElementById('mem').innerText = Math.round(performance.memory.usedJSHeapSize/1048576) + 'MB';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            }, 1000);

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    window.addEventListener('online', () => document.getElementById('offlineBanner').style.display = 'none');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            window.addEventListener('offline', () => document.getElementById('offlineBanner').style.display = 'block');

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    function showToast(m) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const t = document.getElementById('toast');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            t.innerText = m; t.style.display = 'block';
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        setTimeout(() => t.style.display = 'none', 2500);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Init
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                window.onload = () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const p = new URLSearchParams(window.location.search);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if(p.get('t')) v.currentTime = p.get('t');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    if(localStorage.getItem('theme')) document
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    